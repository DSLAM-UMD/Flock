<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Nexmark Benchmark for Apache Flink</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="extra.css" title="default"/><link rel="stylesheet" type="text/css" href="fancyverb.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x"><span style="font-weight: bold">Flock:<span class="mywbr"> &nbsp;</span> A Serverless Streaming SQL Engine</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="Introduction.html" class="tocviewlink" data-pltdoc="x">Introduction</a></td></tr><tr><td align="right"></td><td><a href="Benchmarks.html" class="tocviewselflink" data-pltdoc="x">Benchmarks</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td></td><td><a href="Benchmarks.html" class="tocviewlink" data-pltdoc="x">Benchmarks</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right"></td><td><a href="flink_intro.html" class="tocviewlink" data-pltdoc="x">Introduction to Apache Flink</a></td></tr><tr><td align="right"></td><td><a href="flink_ec2.html" class="tocviewlink" data-pltdoc="x">Flink on EC2</a></td></tr><tr><td align="right"></td><td><a href="flink_eks.html" class="tocviewlink" data-pltdoc="x">Flink on Amazon EKS</a></td></tr><tr><td align="right"></td><td><a href="flink_kinesis.html" class="tocviewlink" data-pltdoc="x">Amazon Kinesis Data Analytics for Apache Flink</a></td></tr><tr><td align="right"></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Nexmark Benchmark for Apache Flink</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Nexmark Benchmark for Apache Flink</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.What_is_.Nexmark%29" class="tocviewlink" data-pltdoc="x">What is Nexmark</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.The_.Queries%29" class="tocviewlink" data-pltdoc="x">The Queries</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Benchmark_.Guideline%29" class="tocviewlink" data-pltdoc="x">Benchmark Guideline</a></td></tr><tr><td align="right"></td><td><a href="#%28part._.References%29" class="tocviewlink" data-pltdoc="x">References</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.What_is_.Nexmark%29" class="tocsubseclink" data-pltdoc="x">What is Nexmark</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.The_.Queries%29" class="tocsubseclink" data-pltdoc="x">The Queries</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Benchmark_.Guideline%29" class="tocsubseclink" data-pltdoc="x">Benchmark Guideline</a></td></tr><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.References%29" class="tocsubseclink" data-pltdoc="x">References</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">7.9</span></div><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="flink_kinesis.html" title="backward to &quot;Amazon Kinesis Data Analytics for Apache Flink&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Benchmarks.html" title="up to &quot;Benchmarks&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h4><a name="(part._flink_nexmark)"></a>Nexmark Benchmark for Apache Flink</h4><h5>1<tt>&nbsp;</tt><a name="(part._.What_is_.Nexmark)"></a>What is Nexmark</h5><p>Nexmark is a benchmark suite for queries over continuous data streams. This benchmark is inspired by
the <a href="https://web.archive.org/web/20100620010601/http://datalab.cs.pdx.edu/niagaraST/NEXMark/">NEXMark research paper</a> and Apache Beam.</p><p>These are multiple queries over a three entities model representing on online auction system:</p><ul><li><p><span style="font-weight: bold">Person</span> represents a person submitting an item for auction and/or making a bid on an auction.</p></li><li><p><span style="font-weight: bold">Auction</span> represents an item under auction.</p></li><li><p><span style="font-weight: bold">Bid</span> represents a bid for an item under auction.</p></li></ul><h5>2<tt>&nbsp;</tt><a name="(part._.The_.Queries)"></a>The Queries</h5><p><table cellspacing="0" cellpadding="0" class="boxed" style="border-collapse: collapse;"><tr><td style="border-bottom: 1px solid black;" colspan="5"><p><span style="font-weight: bold">Nexmark Benchmark Suite</span></p></td></tr><tr><td><p><span style="font-weight: bold">Query</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Name</span></p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p><span style="font-weight: bold">Summary</span></p></td></tr><tr><td><p>q0</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Pass Through</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Measures the monitoring overhead including the source generator.</p></td></tr><tr><td><p>q1</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Currency Conversion</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Convert each bid value from dollars to euros.</p></td></tr><tr><td><p>q2</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Selection</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Find bids with specific auction ids and show their bid price.</p></td></tr><tr><td><p>q3</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Local Item Suggestion</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Who is selling in OR, ID or CA in category 10, and for what auction ids?</p></td></tr><tr><td><p>q4</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Average Price for a Category</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Select the average of the wining bid prices for all auctions in each category.</p></td></tr><tr><td><p>q5</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Hot Items</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Which auctions have seen the most bids in the last period?</p></td></tr><tr><td><p>q6</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Average Selling Price by Seller</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>What is the average selling price per seller for their last 10 closed auctions.</p></td></tr><tr><td><p>q7</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Highest Bid</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Select the bids with the highest bid price in the last period.</p></td></tr><tr><td><p>q8</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Monitor New Users</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Select people who have entered the system and created auctions in the last period.</p></td></tr><tr><td><p>q9</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Winning Bids</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Find the winning bid for each auction.</p></td></tr><tr><td><p>q10</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Log to File System</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Log all events to file system. Illustrates windows streaming data into partitioned file system.</p></td></tr><tr><td><p>q11</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>User Sessions</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>How many bids did a user make in each session they were active? Illustrates session windows.</p></td></tr><tr><td><p>q12</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Processing Time Windows</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>How many bids does a user make within a fixed processing time limit? Illustrates working in processing time window.</p></td></tr><tr><td><p>q13</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Bounded Side Input Join</p></td><td><p><span class="hspace">&nbsp;&nbsp;</span></p></td><td><p>Joins a stream to a bounded side input, modeling basic stream enrichment.</p></td></tr></table></p><p><span class="emph">q1 ~ q8 are from original NEXMark queries, q9 ~ q13 are from Apache Beam.</span></p><h5>3<tt>&nbsp;</tt><a name="(part._.Benchmark_.Guideline)"></a>Benchmark Guideline</h5><p>The Nexmark benchmark framework runs Flink queries on standalone cluster (Session Mode). The cluster should consist of
one master node and one or more worker nodes. All of them should be Linux environment (the CPU monitor script requries to
run on Linux). Please make sure you have the following software installed on each node:</p><ul><li><p>JDK 1.8.x or higher (Nexmark scripts uses some tools of JDK)</p></li><li><p>ssh (sshd must be running to use the Flink and Nexmark scripts that manage remote components)</p></li></ul><p>Having <a href="https://linuxize.com/post/how-to-setup-passwordless-ssh-login/"></a>(passwordless SSH) and the same directory structure
on all your cluster nodes will allow you to use our scripts to control everything.</p><h5><a name="(part._.References)"></a>References</h5><ol><li><p>Pete Tucker, Kristin Tufte, Vassilis Papadimos, David Maier. NEXMark &#8211; A Benchmark for Queries over Data Streams. June 2010.</p></li><li><p>Apache Beam, <a href="https://beam.apache.org/">https://beam.apache.org/</a></p></li><li><p>Nexmark, <a href="https://web.archive.org/web/20100620010601/http://datalab.cs.pdx.edu/niagaraST/NEXMark/">https://web.archive.org/web/20100620010601/http://datalab.cs.pdx.edu/niagaraST/NEXMark/</a></p></li><li><p>Nexmark Benchmark Suite, <a href="https://github.com/nexmark/nexmark">https://github.com/nexmark/nexmark</a></p></li></ol><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="flink_kinesis.html" title="backward to &quot;Amazon Kinesis Data Analytics for Apache Flink&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Benchmarks.html" title="up to &quot;Benchmarks&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>